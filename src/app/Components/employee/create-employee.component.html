<form [formGroup]="employeeForm" class="form-horizontal">
  <div class="card">
    <div class="card-header">
      <h3 class="card-title">Create Employee</h3>
    </div>
    <div class="card-body">

      <div class="form-group">
        <label class="col-sm-2 " for="fullName">Full Name</label>
        <div class="col-sm-8">
          <input class="form-control " formControlName="fullName"
                 id="fullName" type="text"
                 [ngClass]="{'is-invalid': formErrors.fullName}"
                 (blur)="logValidationErrors()">
          <span *ngIf="formErrors.fullName" class="form-text text-danger">
                              {{formErrors.fullName}}
          </span>

        </div>
      </div>

      <div class="form-group">
        <label class="col-md-2 control-label">Contact Preference</label>
        <div class="col-md-6">
          <label class="form-check-label col-md-3">
            <input class="form-check-input" type="radio" value="email" formControlName="contactPreference">Email
          </label>
          <label class="form-check-label col-md-3">
            <input class="form-check-input" type="radio" value="phone" formControlName="contactPreference">Phone
          </label>
        </div>
      </div>
      <div formGroupName="emailGroup">
        <div class="form-group">
        <label class="col-sm-2 control-label" for="email">Email</label>
        <div class="col-sm-8">
          <input class="form-control" formControlName="email"
                 id="email" type="email"
                 [ngClass]="{'is-invalid': formErrors.email}"
                 (blur)="logValidationErrors()">
          <span *ngIf="formErrors.email" class="form-text text-danger">
                              {{formErrors.email}}
            </span>
        </div>
      </div>

        <div class="form-group">
          <label class="col-sm-2 control-label" for="confirmEmail">Confirm Email</label>
          <div class="col-sm-8">
            <input class="form-control" formControlName="confirmEmail"
                   id="confirmEmail" type="text"
                   [ngClass]="{'is-invalid': formErrors.confirmEmail || formErrors.emailGroup}"
                   (blur)="logValidationErrors()">
            <span *ngIf="formErrors.confirmEmail || formErrors.emailGroup" class="form-text text-danger">
                {{formErrors.confirmEmail ? formErrors.confirmEmail : formErrors.emailGroup}}
            </span>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label class="col-sm-2 control-label" for="phone">Phone</label>
        <div class="col-sm-8">
          <input class="form-control" formControlName="phone"
                 id="phone" type="text"
                 [ngClass]="{'is-invalid': formErrors.phone}"
                 (blur)="logValidationErrors()">
          <span *ngIf="formErrors.email" class="form-text text-danger">
                              {{formErrors.phone}}
            </span>
        </div>
      </div>

      <div style="background-color: #f0f3f7;">
        <div class="form-group">
          <div class="col-md-4">
            <button type="button" class="btn btn-dark" (click)="addSkillButtonClick()"
                    [disabled]="employeeForm.get('skills').invalid">
                    Add Skill
            </button>
          </div>
        </div>
        <div formArrayName="skills" *ngFor="let skill of skillsFormGroup.controls; let i = index">
          <hr *ngIf="i>0">
          <div [formGroupName]="i">

            <div class="form-group">
<!--              "FOR" Attribute does not have the corresponding DOM Property so we can not do property binding -->
            <label class="col-sm-2 control-label" [attr.for]="'skillName'+i">
              Skill
            </label>
            <div class="col-sm-8">
              <input class="form-control is-invalid"
                     formControlName="skillName" [id]="'skillName'+i"
                     placeholder="C#, Java, Angular etc..." type="text"
                     [ngClass]="{'is-invalid': skill.get('skillName').invalid && skill.get('skillName').touched}">
              <span *ngIf="skill.get('skillName').errors?.required && skill.get('skillName').touched" class="form-text text-danger">
                             Skill Name is required.
              </span>
            </div>
          </div>
            <div class="form-group ">
            <label class="col-sm-2 control-label" [attr.for]="'experienceInYears'+i">
              Experience
            </label>
            <div class="col-sm-8">
              <input  class="form-control" formControlName="experienceInYears"
                     [id]="'experienceInYears'+i" placeholder="In Years"
                     [ngClass]="{'is-invalid': skill.get('experienceInYears').invalid && skill.get('experienceInYears').touched}"
                     type="text">
               <span *ngIf="skill.get('experienceInYears').errors?.required && skill.get('experienceInYears').touched"
                    class="form-text text-danger">
                                    Experience year is required.
               </span>
            </div>
          </div>
            <div class="form-group">
            <label class="col-md-2 control-label">Proficiency</label>
            <div class="col-md-9">
              <label class="form-check-label col-md-3">
                <input class="form-check-input" formControlName="proficiency"
                       type="radio" value="beginner"
                       [ngClass]="{'is-invalid': skill.get('proficiency').invalid && skill.get('proficiency').touched}">
                       Beginner
              </label>
              <label class="form-check-label col-md-3">
                <input class="form-check-input" formControlName="proficiency"
                       type="radio" value="intermediate"
                       [ngClass]="{'is-invalid': skill.get('proficiency').invalid && skill.get('proficiency').touched}">
                        Intermediate
              </label>
              <label class="form-check-label col-md-3">
                <input class="form-check-input" formControlName="proficiency"
                       type="radio" value="advanced"
                       [ngClass]="{'is-invalid': skill.get('proficiency').invalid && skill.get('proficiency').touched}">
                       Advanced
              </label>
              <div class="mt-2">
                <span *ngIf="skill.get('proficiency').errors?.required &&
                                    skill.get('proficiency').touched" class="help-block text-danger">
                     Proficiency is required
              </span>
              </div>
            </div>
          </div>
            
          </div>
        </div>
      </div>
    </div>

    <div class="card-footer">
      <div class="btn-toolbar">
        <button class="btn btn-dark mx-2" type="submit">Save</button>
        <button class="btn btn-dark" type="button" (click)="onLoadDataClick()">Load Data</button>
      </div>
    </div>

  </div>
</form>
<br/>
<br/>
<table border="1">
  <tr>
    <th style="padding: 10px">FormGroup</th>
    <th style="padding: 10px">FormControl (fullName)</th>
  </tr>
  <tr>
    <td style="padding: 10px">
      touched : {{ employeeForm.touched }}
      <br/> dirty : {{ employeeForm.dirty }}
      <br/> valid : {{ employeeForm.valid }}
      <br/> Form Values : {{employeeForm.value | json}}
    </td>
    <td style="padding: 10px">
      touched : {{ employeeForm.get('fullName').touched }}
      <br/> dirty : {{ employeeForm.get('fullName').dirty }}
      <br/> valid : {{ employeeForm.get('fullName').valid }}
      <br/> FullName Value : {{employeeForm.get('fullName').value}}
    </td>
  </tr>
</table>
